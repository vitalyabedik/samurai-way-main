"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[478],{478:function(e,r,t){t.r(r),t.d(r,{default:function(){return ke}});var s=t(1413),n=t(5671),o=t(3144),i=t(136),a=t(5716),l=t(2791),c=t(7781),u=t(364),d=t(9271),f=t(1304),m=function(e){return{type:f.EM,payload:{status:e}}},h={root:"Profile_root__OMH7n",content:"Profile_content__Mp1z8",timeline:"Profile_timeline__Dq5xV",items:"Profile_items__7MZYr",postForm:"Profile_postForm__nFntk",avatar:"Profile_avatar__evpl1"},p="ProfileInfo_root__Y7OqM",_="ProfileInfo_profileCover__1qUc2",v="ProfileInfo_profileContent__D6nV3",x="ProfileInfo_profileAvatar__BKNmh",j="ProfileInfo_profileAvatar__img__um057",b="ProfileInfo_userStatus__OfUmI",g="ProfileInfo_profileInfo__ZTGSN",Z="ProfileInfo_profileInfo__title__5DwBz",N="ProfileInfo_profileInfo__description__5z8BQ",P=t(1528),y=t(9464),k=t(885),F=t(184),S=function(e){var r=e.status,t=e.updateUserStatus,s=(0,l.useState)(!1),n=(0,k.Z)(s,2),o=n[0],i=n[1],a=(0,l.useState)(r),c=(0,k.Z)(a,2),u=c[0],d=c[1];return(0,F.jsx)("div",{children:o?(0,F.jsx)("div",{children:(0,F.jsx)("input",{onChange:function(e){d(e.currentTarget.value)},value:u,onBlur:function(){i(!1),t(u)},autoFocus:!0})}):(0,F.jsx)("div",{children:(0,F.jsx)("span",{onDoubleClick:function(){i(!0)},children:r||"No Status"})})})},I=t(1813),w=function(e){var r=e.profile,t=e.status,s=e.isOwner,n=e.updateUserStatus,o=e.savePhoto;if(!r)return(0,F.jsx)(y.p,{});return(0,F.jsxs)("div",{className:p,children:[(0,F.jsx)("div",{children:(0,F.jsx)("img",{className:_,src:P,alt:"profile-cover"})}),(0,F.jsxs)("div",{className:v,children:[(0,F.jsxs)("div",{className:x,children:[(0,F.jsx)("img",{className:j,src:r.photos.large||I,alt:"profile-avatar-8"}),s&&(0,F.jsx)("input",{type:"file",onChange:function(e){e.target.files&&o(e.target.files[0])}}),(0,F.jsx)("div",{className:b})]}),(0,F.jsxs)("div",{className:g,children:[(0,F.jsx)("h1",{className:Z,children:r.fullName}),(0,F.jsx)("p",{className:N,children:r.aboutMe}),(0,F.jsx)(S,{status:t,updateUserStatus:n})]})]})]})},A={},C="Post_root__3HkjV",U="Post_text__th+3h",M="Post_likes__TghBx",D="Post_likesIcon__tlkPJ",O="Post_likesCount__5Q9Qo",B={root:"PostHeader_root__f63hr",user:"PostHeader_user__CR6lM",user__image:"PostHeader_user__image__MyFUO",user__avatar:"PostHeader_user__avatar__tYVlg",user__Name:"PostHeader_user__Name__z5Q7H"};var T=t.p+"static/media/icon-more.1bb396989f806e6d727107c508fbe248.svg",E=function(e){var r=e.showMore,t=void 0===r||r,s=e.currentUser,n=s.avatar,o=s.userFirstName,i=s.userLastName;return(0,F.jsxs)("div",{className:B.root,children:[(0,F.jsxs)("div",{className:B.user,children:[(0,F.jsx)("div",{className:B.user__image,children:(0,F.jsx)("img",{className:B.user__avatar,src:n,alt:"contact-avatar"})}),(0,F.jsx)("span",{className:B.user__Name,children:"".concat(o," ").concat(i)})]}),t&&(0,F.jsx)("div",{className:B.iconBlock,children:(0,F.jsx)("img",{className:B.icon,src:T,alt:"more-icon"})})]})},H=t(9898),L=function(e){return(0,F.jsxs)("div",{className:C,children:[(0,F.jsx)(E,{currentUser:e.currentUser}),(0,F.jsx)("div",{className:U,children:e.post.message}),(0,F.jsxs)("div",{className:M,children:[(0,F.jsx)("img",{className:D,src:H.Z,alt:"icon-likes"}),(0,F.jsx)("span",{className:O,children:e.post.likesCount})]})]})},J=l.memo((function(e){var r=e.posts.map((function(r){return(0,F.jsx)(L,{post:r,currentUser:e.currentUser},r.id)}));return(0,F.jsx)("div",{className:A.timeline,children:(0,F.jsx)("div",{className:A.posts,children:r})})})),G="Sidebar_root__zwRgy",z={root:"About_root__ACJTJ"},Q="ProfileData_items__ZBW+n",R="ProfileData_item__ftWnw",V="ProfileData_iconBlock__L9st6",q="ProfileData_iconImage__ekRPt",W="ProfileData_info__enE05",Y=t(9600),X=function(e){var r=e.title,t=e.value;return(0,F.jsxs)("div",{children:[(0,F.jsx)("b",{children:r}),": ",t]})},$=function(e){var r=e.profile,t=e.isOwner,s=e.activateEditMode;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{children:t&&(0,F.jsx)("button",{onClick:function(){s()},children:"edit"})}),(0,F.jsxs)("ul",{className:Q,children:[(0,F.jsxs)("li",{className:R,children:[(0,F.jsx)("div",{className:V,children:(0,F.jsx)("img",{className:q,src:Y.Z,alt:"home-icon"})}),(0,F.jsx)("div",{children:"Looking for a job:"}),(0,F.jsx)("div",{className:W,children:null!==r&&void 0!==r&&r.lookingForAJob?"No":null===r||void 0===r?void 0:r.lookingForAJob})]}),(null===r||void 0===r?void 0:r.lookingForAJob)&&(0,F.jsxs)("li",{className:R,children:[(0,F.jsx)("div",{className:V,children:(0,F.jsx)("img",{className:q,src:Y.Z,alt:"home-icon"})}),(0,F.jsx)("div",{children:"Looking for a job:"}),(0,F.jsx)("div",{className:W,children:null===r||void 0===r?void 0:r.lookingForAJobDescription})]}),(null===r||void 0===r?void 0:r.contacts.facebook)&&(0,F.jsxs)("li",{className:R,children:[(0,F.jsx)("div",{className:V,children:(0,F.jsx)("img",{className:q,src:Y.Z,alt:"home-icon"})}),(0,F.jsx)("div",{children:"facebook:"}),(0,F.jsx)("div",{className:W,children:null===r||void 0===r?void 0:r.contacts.facebook})]}),(0,F.jsxs)("li",{children:[(0,F.jsx)("b",{children:"About me"}),": ",null===r||void 0===r?void 0:r.aboutMe]}),(null===r||void 0===r?void 0:r.contacts)&&(0,F.jsxs)("li",{children:[(0,F.jsx)("b",{children:"Contacts"}),": ",Object.keys(r.contacts).map((function(e){return(0,F.jsx)(X,{title:e,value:r.contacts[e]},e)}))]})]})]})},K=t(704),ee=t(5032),re=t(5800),te=(0,K.Z)({form:"edit-profile"})((function(e){var r=e.profile,t=e.handleSubmit,s=e.error;return(0,F.jsxs)("form",{onSubmit:t,children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("button",{children:"save"}),s&&(0,F.jsx)("div",{className:ee.Z.formSummaryError,children:s})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("b",{children:"Full name"}),": ",null===r||void 0===r?void 0:r.lookingForAJob,(0,re.Gr)("Full name","fullName",[],re.II)]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("b",{children:"Looking for a job"}),": ",null!==r&&void 0!==r&&r.lookingForAJob?"yes":"no",(0,re.Gr)("","lookingForAJob",[],re.II,{type:"checkbox"})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("b",{children:"My professional skills"}),": ",null===r||void 0===r?void 0:r.lookingForAJobDescription,(0,re.Gr)("My professional skills","lookingForAJobDescription",[],re.gx)]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("b",{children:"About me"}),": ",null===r||void 0===r?void 0:r.aboutMe,(0,re.Gr)("About me","aboutMe",[],re.gx)]}),(null===r||void 0===r?void 0:r.contacts)&&(0,F.jsxs)("div",{children:[(0,F.jsx)("b",{children:"Contacts"}),": ",Object.keys(r.contacts).map((function(e){return(0,F.jsxs)("div",{children:[(0,F.jsx)("b",{children:e}),": ",(0,re.Gr)(e,"contacts."+e,[],re.II)]},e)}))]})]})})),se=function(e){var r=e.profile,t=e.isOwner,s=e.updateProfile,n=(0,l.useState)(!1),o=(0,k.Z)(n,2),i=o[0],a=o[1];return r?(0,F.jsxs)("div",{className:z.root,children:[(0,F.jsx)("h4",{className:z.sidebar__title,children:"About"}),i?(0,F.jsx)(te,{profile:r,onSubmit:function(e){s(e).then((function(){return a(!1)}))}}):(0,F.jsx)($,{profile:r,isOwner:t,activateEditMode:function(){a(!0)}})]}):(0,F.jsx)(y.p,{})},ne={root:"Friends_root__EmmNh",friendsHeader:"Friends_friendsHeader__8XsLT",friendsCount:"Friends_friendsCount__msOdN",seeAll:"Friends_seeAll__aGBmH",items:"Friends_items__CEgtD",friendsButton:"Friends_friendsButton__5gLNx"},oe="Friend_item__GXIaf",ie="Friend_img__afS1G",ae="Friend_userName__csx+G",le=function(e){var r=e.friend;return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)("li",{children:(0,F.jsxs)("div",{className:oe,children:[(0,F.jsx)("img",{className:ie,src:r.avatar,alt:"avatar-friend"}),(0,F.jsx)("span",{className:ae,children:"".concat(r.userFirstName," ").concat(r.userLastName)})]})},r.id)})},ce=function(e){var r=e.friends;return(0,F.jsxs)("div",{className:ne.root,children:[(0,F.jsxs)("div",{className:ne.friendsHeader,children:[(0,F.jsxs)("div",{className:ne.titleAndCount,children:[(0,F.jsx)("h4",{children:"Friends"}),(0,F.jsxs)("div",{className:ne.friendsCount,children:[r.count," Friends"]})]}),(0,F.jsx)("div",{className:ne.seeAll,children:(0,F.jsx)("a",{children:"See all"})})]}),(0,F.jsx)("ul",{className:ne.items,children:r.list.slice(0,6).map((function(e){return(0,F.jsx)(le,{friend:e},e.id)}))}),(0,F.jsx)("button",{className:ne.friendsButton,children:"See all"})]})},ue=function(e){var r=e.state,t=e.profile,s=e.isOwner,n=e.updateProfile;return(0,F.jsxs)("div",{className:G,children:[(0,F.jsx)(se,{about:r.about,profile:t,isOwner:s,updateProfile:n}),(0,F.jsx)(ce,{friends:r.friends})]})},de={root:"PostForm_root__HrUJI",buttonBlock:"PostForm_buttonBlock__ZSxDa",button:"PostForm_button__th-Xt"},fe=t(6139),me=t(5210),he=(0,me.D)(10),pe=(0,K.Z)({form:"ProfileAddNewPostForm"})((function(e){return(0,F.jsx)("div",{className:de.root,children:(0,F.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,F.jsx)(fe.Z,{component:re.gx,className:de.textarea,name:"newPostText",placeholder:"What's Your Mind ? Hamse!",validate:[me.C,he]}),(0,F.jsx)("div",{className:de.buttonBlock,children:(0,F.jsx)("button",{className:de.button,children:"Add post"})})]})})})),_e=function(e){var r=e.profile,t=e.currentUser,s=e.status,n=e.profilePage,o=e.isOwner,i=e.updateUserStatus,a=e.addPost,l=e.savePhoto,c=e.updateProfile;return(0,F.jsx)("div",{className:h.root,children:(0,F.jsxs)("div",{className:h.content,children:[(0,F.jsx)(w,{isOwner:o,profile:r,status:s,updateUserStatus:i,savePhoto:l}),(0,F.jsxs)("div",{className:h.items,children:[(0,F.jsxs)("div",{className:h.timeline,children:[(0,F.jsx)("div",{className:h.postForm,children:(0,F.jsxs)("div",{className:h.imgAndTextarea,children:[(0,F.jsx)(E,{currentUser:t,showMore:!1}),(0,F.jsx)(pe,{onSubmit:function(e){a(e.newPostText)}})]})}),(0,F.jsx)(J,{currentUser:t,posts:n.posts})]}),(0,F.jsx)(ue,{state:n.sidebar,profile:r,isOwner:o,updateProfile:c})]})]})})},ve=t(5861),xe=t(7757),je=t.n(xe),be=t(7174),ge=t(2423),Ze=(ge.Z.arrayInsert,ge.Z.arrayMove,ge.Z.arrayPop,ge.Z.arrayPush,ge.Z.arrayRemove,ge.Z.arrayRemoveAll,ge.Z.arrayShift,ge.Z.arraySplice,ge.Z.arraySwap,ge.Z.arrayUnshift,ge.Z.autofill,ge.Z.blur,ge.Z.change,ge.Z.clearAsyncError,ge.Z.clearFields,ge.Z.clearSubmit,ge.Z.clearSubmitErrors,ge.Z.destroy,ge.Z.focus,ge.Z.initialize,ge.Z.registerField,ge.Z.reset,ge.Z.resetSection,ge.Z.setSubmitFailed,ge.Z.setSubmitSucceeded,ge.Z.startAsyncValidation,ge.Z.startSubmit,ge.Z.stopAsyncValidation,ge.Z.stopSubmit),Ne=(ge.Z.submit,ge.Z.touch,ge.Z.unregisterField,ge.Z.untouch,ge.Z.updateSyncWarnings,ge.Z.updateSyncErrors,function(e){return function(){var r=(0,ve.Z)(je().mark((function r(t){var s;return je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,be.FZ.getProfile(e);case 2:s=r.sent,t((n=s,{type:f.cF,payload:{profile:n}}));case 4:case"end":return r.stop()}var n}),r)})));return function(e){return r.apply(this,arguments)}}()}),Pe=t(2932),ye=function(e){(0,i.Z)(t,e);var r=(0,a.Z)(t);function t(){return(0,n.Z)(this,t),r.apply(this,arguments)}return(0,o.Z)(t,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,r,t){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,F.jsx)(_e,(0,s.Z)((0,s.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus,savePhoto:this.props.savePhoto,updateProfile:this.props.updateProfile}))}}]),t}(l.Component),ke=(0,c.qC)((0,u.$j)((function(e){return{profilePage:e.profilePage,currentUser:e.currentUser,profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{addPost:function(e){return{type:f.QB,payload:{newPostText:e}}},getUserProfile:Ne,getUserStatus:function(e){return function(){var r=(0,ve.Z)(je().mark((function r(t){var s;return je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,be.FZ.getStatus(e);case 2:s=r.sent,t(m(s));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},updateUserStatus:function(e){return function(){var r=(0,ve.Z)(je().mark((function r(t){return je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,be.FZ.updateStatus(e);case 2:0===r.sent.data.resultCode&&t(m(e));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},savePhoto:function(e){return function(){var r=(0,ve.Z)(je().mark((function r(t){var s;return je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,be.FZ.savePhoto(e);case 2:0===(s=r.sent).resultCode&&t((n=s.data.photos,{type:f.z3,payload:{photos:n}}));case 4:case"end":return r.stop()}var n}),r)})));return function(e){return r.apply(this,arguments)}}()},updateProfile:function(e){return function(){var r=(0,ve.Z)(je().mark((function r(t,s){var n,o;return je().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=s().auth.userId){r.next=4;break}return console.warn("userId not found in the state"),r.abrupt("return");case 4:return r.next=6,be.FZ.updateProfile(e);case 6:if(0!==(o=r.sent).data.resultCode){r.next=11;break}t(Ne(n)),r.next=13;break;case 11:return t(Ze("edit-profile",{_error:o.data.messages[0]})),r.abrupt("return",Promise.reject(o.data.messages[0]));case 13:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()}}),d.EN,Pe.F)(ye)},5800:function(e,r,t){t.d(r,{II:function(){return m},gx:function(){return f},Gr:function(){return h}});var s=t(1413),n=t(5987),o=(t(2791),t(6139)),i="FormsControls_formControl__juIQD",a="FormsControls_error__6v+Mj",l="FormsControls_errorMessage__oQ6Zg",c=t(184),u=["input","meta","FormType"],d=function(e){var r=e.input,t=e.meta,o=e.FormType,d=(0,n.Z)(e,u),f=t.touched&&t.error,m="".concat(i," ").concat(f?a:"");return(0,c.jsxs)("div",{className:m,children:[f&&(0,c.jsx)("div",{className:l,children:t.error}),(0,c.jsx)(o,(0,s.Z)((0,s.Z)({},r),d))]})},f=function(e){var r=Object.assign({},e);return(0,c.jsx)(d,(0,s.Z)((0,s.Z)({},r),{},{FormType:"textarea"}))},m=function(e){var r=Object.assign({},e);return(0,c.jsx)(d,(0,s.Z)((0,s.Z)({},r),{},{FormType:"input"}))};function h(e,r,t,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return(0,c.jsxs)("div",{children:[(0,c.jsx)(o.Z,(0,s.Z)({placeholder:e,name:r,validate:t,component:n},i))," ",(0,c.jsxs)("label",{children:[" ",a," "]})]})}},2932:function(e,r,t){t.d(r,{F:function(){return u}});var s=t(1413),n=t(5987),o=(t(2791),t(364)),i=t(9271),a=t(184),l=["isAuth"],c=function(e){return{isAuth:e.auth.isAuth}};function u(e){return(0,o.$j)(c)((function(r){r.isAuth;var t=(0,n.Z)(r,l);return r.isAuth?(0,a.jsx)(e,(0,s.Z)({},t)):(0,a.jsx)(i.l_,{to:"/login"})}))}},5210:function(e,r,t){t.d(r,{C:function(){return s},D:function(){return n}});var s=function(e){return e?void 0:"Field is required"},n=function(e){return function(r){if(r.length>e)return"Max length is ".concat(e," symbols")}}},5032:function(e,r){r.Z={root:"Login_root__YFkMZ",loginForm:"Login_loginForm__u4BMz",loginCheckbox:"Login_loginCheckbox__IATv5",loginCheckboxText:"Login_loginCheckboxText__2hzRe",formSummaryError:"Login_formSummaryError__2GnfW",blink1:"Login_blink1__9f3Iy"}},1528:function(e,r,t){e.exports=t.p+"static/media/profile-cover.97a7b2bf6505f2dc1883.jpg"},1813:function(e,r,t){e.exports=t.p+"static/media/default-user.8eb58e9f12ebb1b004b4.png"},885:function(e,r,t){t.d(r,{Z:function(){return n}});var s=t(181);function n(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var s,n,o=[],i=!0,a=!1;try{for(t=t.call(e);!(i=(s=t.next()).done)&&(o.push(s.value),!r||o.length!==r);i=!0);}catch(l){a=!0,n=l}finally{try{i||null==t.return||t.return()}finally{if(a)throw n}}return o}}(e,r)||(0,s.Z)(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=478.8ed53379.chunk.js.map